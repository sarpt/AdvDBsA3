<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="tU_INGREDIENT_STOCK" directorySegmentName="seg_0" id="43D2510A-44EC-7EA9-DA46-B5AB70E5EF94">
<sourceDDLFile>script.ddl</sourceDDLFile>
<createdBy>Mike</createdBy>
<createdTime>2016-10-12 16:14:09 UTC</createdTime>
<ownerDesignName>RestaurantDataModel</ownerDesignName>
<actions>UPDATE</actions>
<body>-- ERwin Builtin Trigger&lt;br&gt;-- UPDATE trigger on INGREDIENT_STOCK &lt;br&gt;DECLARE NUMROWS INTEGER;&lt;br&gt;BEGIN&lt;br&gt;  /* INGREDIENT_STOCK  SUPPLIER_STOCK on parent update set null */&lt;br&gt;  /* ERWIN_RELATION:CHECKSUM=&quot;00036c3a&quot;, PARENT_OWNER=&quot;&quot;, PARENT_TABLE=&quot;INGREDIENT_STOCK&quot;&lt;br&gt;    CHILD_OWNER=&quot;&quot;, CHILD_TABLE=&quot;SUPPLIER_STOCK&quot;&lt;br&gt;    P2C_VERB_PHRASE=&quot;&quot;, C2P_VERB_PHRASE=&quot;&quot;, &lt;br&gt;    FK_CONSTRAINT=&quot;R_18&quot;, FK_COLUMNS=&quot;IngrStockID&quot; */&lt;br&gt;  IF&lt;br&gt;    /* %JoinPKPK(:%Old,:%New,&quot; &lt;&gt; &quot;,&quot; OR &quot;) */&lt;br&gt;    :old.IngrStockID &lt;&gt; :new.IngrStockID&lt;br&gt;  THEN&lt;br&gt;    UPDATE SUPPLIER_STOCK&lt;br&gt;      SET&lt;br&gt;        /* %SetFK(SUPPLIER_STOCK,NULL) */&lt;br&gt;        SUPPLIER_STOCK.IngrStockID = NULL&lt;br&gt;      WHERE&lt;br&gt;        /* %JoinFKPK(SUPPLIER_STOCK,:%Old,&quot; = &quot;,&quot;,&quot;) */&lt;br&gt;        SUPPLIER_STOCK.IngrStockID = :old.IngrStockID;&lt;br&gt;  END IF;&lt;br&gt;&lt;br&gt;  /* ERwin Builtin Trigger */&lt;br&gt;  /* INGREDIENT_STOCK  SUPPLY_REQUEST on parent update restrict */&lt;br&gt;  /* ERWIN_RELATION:CHECKSUM=&quot;00000000&quot;, PARENT_OWNER=&quot;&quot;, PARENT_TABLE=&quot;INGREDIENT_STOCK&quot;&lt;br&gt;    CHILD_OWNER=&quot;&quot;, CHILD_TABLE=&quot;SUPPLY_REQUEST&quot;&lt;br&gt;    P2C_VERB_PHRASE=&quot;&quot;, C2P_VERB_PHRASE=&quot;&quot;, &lt;br&gt;    FK_CONSTRAINT=&quot;R_17&quot;, FK_COLUMNS=&quot;IngrStockID&quot; */&lt;br&gt;  IF&lt;br&gt;    /* %JoinPKPK(:%Old,:%New,&quot; &lt;&gt; &quot;,&quot; OR &quot;) */&lt;br&gt;    :old.IngrStockID &lt;&gt; :new.IngrStockID&lt;br&gt;  THEN&lt;br&gt;    SELECT count(*) INTO NUMROWS&lt;br&gt;      FROM SUPPLY_REQUEST&lt;br&gt;      WHERE&lt;br&gt;        /*  %JoinFKPK(SUPPLY_REQUEST,:%Old,&quot; = &quot;,&quot; AND&quot;) */&lt;br&gt;        SUPPLY_REQUEST.IngrStockID = :old.IngrStockID;&lt;br&gt;    IF (NUMROWS &gt; 0)&lt;br&gt;    THEN &lt;br&gt;      raise_application_error(&lt;br&gt;        -20005,&lt;br&gt;        &apos;Cannot update INGREDIENT_STOCK because SUPPLY_REQUEST exists.&apos;&lt;br&gt;      );&lt;br&gt;    END IF;&lt;br&gt;  END IF;&lt;br&gt;&lt;br&gt;  /* ERwin Builtin Trigger */&lt;br&gt;  /* INGREDIENT_STOCK  INGREDIENT on parent update restrict */&lt;br&gt;  /* ERWIN_RELATION:CHECKSUM=&quot;00000000&quot;, PARENT_OWNER=&quot;&quot;, PARENT_TABLE=&quot;INGREDIENT_STOCK&quot;&lt;br&gt;    CHILD_OWNER=&quot;&quot;, CHILD_TABLE=&quot;INGREDIENT&quot;&lt;br&gt;    P2C_VERB_PHRASE=&quot;&quot;, C2P_VERB_PHRASE=&quot;&quot;, &lt;br&gt;    FK_CONSTRAINT=&quot;R_4&quot;, FK_COLUMNS=&quot;IngrStockID&quot; */&lt;br&gt;  IF&lt;br&gt;    /* %JoinPKPK(:%Old,:%New,&quot; &lt;&gt; &quot;,&quot; OR &quot;) */&lt;br&gt;    :old.IngrStockID &lt;&gt; :new.IngrStockID&lt;br&gt;  THEN&lt;br&gt;    SELECT count(*) INTO NUMROWS&lt;br&gt;      FROM INGREDIENT&lt;br&gt;      WHERE&lt;br&gt;        /*  %JoinFKPK(INGREDIENT,:%Old,&quot; = &quot;,&quot; AND&quot;) */&lt;br&gt;        INGREDIENT.IngrStockID = :old.IngrStockID;&lt;br&gt;    IF (NUMROWS &gt; 0)&lt;br&gt;    THEN &lt;br&gt;      raise_application_error(&lt;br&gt;        -20005,&lt;br&gt;        &apos;Cannot update INGREDIENT_STOCK because INGREDIENT exists.&apos;&lt;br&gt;      );&lt;br&gt;    END IF;&lt;br&gt;  END IF;&lt;br&gt;&lt;br&gt;&lt;br&gt;-- ERwin Builtin Trigger&lt;br&gt;END;</body>
<triggerTime>AFTER</triggerTime>
<table>89274256-F40B-D1B0-4E28-8449BD8EEFDC</table>
</TriggerOraclev10g>